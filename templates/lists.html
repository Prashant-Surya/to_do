{% extends "base.html" %}

{% block extracss %}
<style>
.container{
    background-color: white;
    height: 70%;
    width: 600px;
    overflow: auto;
    overflow-x: hidden;
    margin: auto;
    position: absolute;
    top: 0; left: 0; bottom: 0; right: 0;
    border-radius: 5px;
}
.container ul{
    padding-right: 0px;
    padding-left: 0px;
}
.container ul li{
    list-style-type: none;
    margin-left: 0;
    padding-bottom: 5px;
    padding-left: 5px;
}

.container ul li input{
    /*width: 100%;*/
    font-size: 30px;
}

input[type="text"]{
    padding: 0;
}

input[type="checkbox"]{
    height: 25px;
    width: 25px;
}

textarea {
    height: 35px;
    width: 500px;
    overflow-x: hidden;
    overflow-y: hidden;
    font-size: 20px;
    padding:0;
    resize: none;
}

div.row-container{
    border-bottom: 1px;
}

button{
    margin-top:15px;
    margin-left:15px;
}

.invisible{
    display: none;
}

</style>
{% endblock %}

{% block bodyblock %}

<div class='container'>
    <button id="add-task"> Add task </button>
    <div id="new-data" class="invisible">
        <form method="POST" url="{% url save_new_form %}">
            {% csrf_token %}
            <span>{{ form.text }} </span>
        </form>
    </div>
    <ul class="tasks-container">
        <!-- <li>
            <div class='row-container'>
            </div>
        </li> -->

    </ul>
</div>

{% endblock %}

{% block scripts %}

<script>

$("#add-task").on("click", function(){
    $("#new-data").removeClass("invisible");
});

$("#new-data textarea").keydown(function(e){
    if((e.keyCode || e.which) == 13){
        e.preventDefault();
        $("#new-data").addClass("invisible");
        $form = $("#new-data form");
        $data = {
            'text': $("#id_text").val(),
            'csrfmiddlewaretoken':$("input[name='csrfmiddlewaretoken']").val()
        }
        console.log($data);
        $.ajax({
            url: $form.attr("url"),
            dataType: "json",
            type: "POST",
            data: $data,
            success: function(response){
                console.log(response);
            },
            error: function(response){
                console.log(response);
            }
        });
    }
});

</script>


{% endblock %}